## 服务器的基本概念

上网过程中，负责存放和对外提供资源的电脑，叫做服务器。

### URL地址

URL（全称是 UniformResourceLocator）中文叫统一资源定位符，用于标识互联网上每个资源的唯一存放位置。浏览器只有通过 URL 地址，才能正确定位资源的存放位置，从而成功访问到对应的资源。常见的URL举例：http://www.baidu.com、http://www.xxx.com/blog/xyz/1.html。

URL地址的组成部分一般有三部：客户端与服务器之间的通信协议、存有该资源的服务器名称、资源在服务器上具体的存放位置。

从输入URL到页面加载发生了什么：DNS 解析、TCP 连接、发送HTTP请求、服务器处理请求并返回 HTTP 报文（响应）、浏览器解析渲染页面、连接结束。

当在浏览器中输入一个地址时，例如 www.baidu.com，其实不是百度网站真正意义上的地址。互联网上每一台计算机的唯一标识是它的公网 IP 地址。DNS解析是一个递归查询的过程。首先在**本地域名服务器**中查询 IP 地址，如果没有找到的情况下，本地域名服务器会向**根域名服务器**发送一个请求，如果根域名服务器也不存在该域名时，本地域名会**向 com 顶级域名服务器**发送一个请求，依次类推下去。这里不得不提**DNS优化**。DNS缓存存在 Linux 系统的 /etc/hosts 中。在说 DNS 负载均衡前，要知道 DNS 每次返回的 IP 地址都不一定一样。而是根据每台机器的负载量，该机器离用户地理位置的距离等返回一个合适的机器的 IP 给用户。这种过程就是 DNS 负载均衡，又叫做 DNS 重定向。耳熟能详的 Content Delivery Network(CDN) 就是利用 DNS 的重定向技术，DNS 服务器会返回一个跟用户最接近的点的 IP 地址给用户，CDN 节点的服务器负责响应用户的请求，提供所需的内容。

TCP 建立连接需要经过三次握手，而断开连接需要经过四次分手。

HTTP 报文是包裹在 TCP 报文中发送的，服务器端收到 TCP 报文时会解包提取出 HTTP 报文。但是这个过程中存在一定的风险，HTTP 报文是明文，如果中间被截取的话会存在一些信息泄露的风险。那么在进入 TCP 报文之前对 HTTP 做一次加密就可以解决这个问题了。HTTPS 协议的本质就是 HTTP + SSL(or TLS)。在 HTTP 报文进入 TCP 报文之前，先使用 SSL 对 HTTP 报文进行加密。从网络层级结构看它位于 HTTP 协议与 TCP 协议之间。HTTPS 在传输数据之前需要客户端与服务器进行一个握手(TLS/SSL握手)，在握手过程中将确立双方加密传输数据的密码信息。TLS/SSL使用了非对称加密，对称加密以及hash等。

### Ajax

Ajax 即异步 JavaScript 和 XML，全称是 Asynchronous Javascript And XML。在网页中利用 XMLHttpRequest 对象和服务器进行数据交互的方式。典型应用场景有检测用户名是否占用、加载搜索提示列表、根据页码值动态刷新表格数据。

```js
// jQuery
// $.get(url, [data], [callback])
$.get('http://www.zszszs.top:3006/api/getctx', { id: 1 }, function(res) {
    console.log(res)
})
// $.post(url, [data], [callback])
$.post(
   'http://www.zszszs.top:3006/api/addgift', // 请求的URL地址
   { giftname: 'macbookpro', username: 'zszs', way: 'jingdong' }, // 提交的数据
   function(res) { // 回调函数
      console.log(res)
   }
)
/* $.ajax({
   type: '', // 请求的方式，例如 GET 或 POST
   url: '',  // 请求的 URL 地址
   data: { },// 这次请求要携带的数据
   success: function(res) { } // 请求成功之后的回调函数
}) */
$.ajax({
   type: 'GET', // 请求的方式
   url: 'http://www.zszszs.top:3006/api/getgifts',  // 请求的 URL 地址
   data: { id: 1 }, // 这次请求要携带的数据
   success: function(res) { // 请求成功之后的回调函数
       console.log(res)
   }
})
```

| **参数名** | **参数类型** | **是否必选** | **说明**                 |
| ---------- | ------------ | ------------ | ------------------------ |
| url        | string       | 是           | 要请求的资源地址         |
| data       | object       | 否           | 请求资源期间要携带的参数 |
| callback   | function     | 否           | 请求成功时的回调函数     |

| **参数名** | **参数类型** | **是否必选** | **说明**                 |
| ---------- | ------------ | ------------ | ------------------------ |
| url        | string       | 是           | 提交数据的地址           |
| data       | object       | 否           | 要提交的数据             |
| callback   | function     | 否           | 数据提交成功时的回调函数 |

#### 接口的概念

使用 Ajax 请求数据时，被请求的 URL 地址，就叫做数据接口（简称接口）。同时，每个接口必须有请求方式。

#### 接口文档的组成部分

接口文档可以包含很多信息，也可以按需进行精简，不过，一个合格的接口文档，应该包含以下6项内容，从而为接口的调用提供依据。

- 接口名称：用来标识各个接口的简单说明，如登录接口，获取图书列表接口等。
- 接口URL：接口的调用地址。
- 调用方式：接口的调用方式，如 GET 或 POST。
- 参数格式：接口需要传递的参数，每个参数必须包含参数名称、参数类型、是否必选、参数说明这4项内容。
- 响应格式：接口的返回值的详细描述，一般包含数据名称、数据类型、说明3项内容。
- 返回示例（可选）：通过对象的形式，例举服务器返回数据的结构。

<u>在需要文本框也通过监听回车按键的事件时，可以给文本框监听 keyup 事件，当 e.keyCode 为 13 时，通过编程的形式触发按钮的点击事件。</u>

